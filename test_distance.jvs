
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;

void main() {
   int nombrelettre, i, nbrinitial;
   int niveau = 8;
   int erreur = 0;
   int palier = 1;
   String alphabet = "azertyuiopqsdfghjklmwxcvbn";
   String path = System.getProperty("user.dir");
   char lettrechar;
   char lettre, lettrevue;
JOptionPane jop1, jop2, jop3;
jop1 = new JOptionPane();
jop1.showMessageDialog(null, "Message informatif:\nCe test nécessite 2 personnes pour être réalisé.\nLe \"patient\" indique la lettre qu'il perçoit.\nLe \"médecin\" rentre la lettre que le patient lui donne.\nSi la lecture est correcte, une nouvelle lettre s'affiche mais de taille inférieure. Sinon, la lettre affichée est de même taille.\nVeuillez placer le patient à 1 mètre de l'écran.\nLe test débutera à la fermeture de cette boîte d'informations.", "----Test d'acuité visuelle----", JOptionPane.INFORMATION_MESSAGE);
//   println("----Test d'acuité visuelle----");
//   println("Ce test nécessite 2 personnes pour être réalisé.");
//   println("Le \"patient\" indique la lettre qu'il perçoit.");
//   println("Le \"médecin\" rentre la lettre que le patient lui donne.");
//   println("Si la lecture est correcte, une nouvelle lettre s'affiche mais de taille inférieure. Sinon, la lettre affichée est de même taille.");
//   println("Veuillez placer le patient à 1 mètre de l'écran.");
   //println("Indiquer le nombre de lettres à afficher");
   nombrelettre = 20; //readInteger("Nombre de lettres à afficher?");
    nbrinitial = nombrelettre;
   //   println("Vous avez choisi d'afficher " + nombrelettre+" lettres.");
//    println("ATTENTION! Début du test dans 5 secondes!");
//   sleep(5000);
    while (nombrelettre > 0) {
      //génération aléatoire d'une lettre
       i = random(0, 25);
      lettrechar = alphabet.charAt(i);
      //lettre = Character.toString(lettrechar);
       lettre = lettrechar;
      //chargement de la lettre
       load(path + "/images/" + niveau + "/" + lettre+".jpg", false, false);
      lettrevue = readChar("Quelle lettre voyez-vous? (en minuscule)");
      if (lettre == lettrevue) {
         niveau = niveau -1;
         palier++;
         if (palier > 8){
         	palier = 8;
         	nombrelettre = 0;
         }
         erreur = 0;
         println("Bonne réponse!");
         sleep(500);
         if (niveau < 1) {
            niveau = 1;
         }
      } else {
         println("Mauvaise réponse!");
         erreur ++;
         if (erreur >=2) {
            println("Vous avez fait 2 erreurs!");
            nombrelettre = 0;
         }
         sleep(500);
      }
      nombrelettre = nombrelettre-1;
   }
      println("Votre avez atteint le palier n°" + palier+".");
      if (palier > 6){
      	jop2 = new JOptionPane();
	jop2.showMessageDialog(null, "Vous avez une excellente vue! Bravo!", "Résultats!", JOptionPane.INFORMATION_MESSAGE);

      	println("Vous avez une excellente vue! Bravo!");
      }
      else if (palier == 6) {
jop3 = new JOptionPane();
	jop3.showMessageDialog(null, "Vous avez une bonne vue! Bravo!", "Résultats!", JOptionPane.INFORMATION_MESSAGE);

      	println("Vous avez une bonne vue! C'est bien!");
      }
      else {
      	int codepostal = readInteger ("Votre vue peut être corrigée, saisissez votre code postal, un opthtalmologiste près de chez vous vous sera communiqué");
      	openURL("http://www.opticiensenfrance.com/recherche?type=practicien_ophtalmologiste&tid=All&localite="+codepostal);
      }
}

